<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Console</title>
  </head>
  <body>
    <link rel="stylesheet" type="text/css" href="sdk/css/wmks-all.css" />
    <script type="text/javascript" src="sdk/jquery.min.js"></script>
    <script type="text/javascript" src="sdk/jquery-ui.min.js"></script>
    <script type="text/javascript" src="sdk/wmks.min.js"></script>
    <div style="margin: 30px; font-weight: 600; font-size: 1.5rem" id="name"></div>
    <button id="ctrl-alt-del" data-i18n-key="wmks.ctrl.alt.del">Ctrl+Alt+Del</button>
    <div id="wmksContainer" style="position: absolute; width: 100%; height: 100%"></div>
    <script>
      if (localStorage.getItem("OSDekaprime") == "Microsoft") {
        document.getElementById("ctrl-alt-del").style.display = "block";
      } else {
        document.getElementById("ctrl-alt-del").style.display = "none";
      }

      var wmks = WMKS.createWMKS("wmksContainer", {}).register(WMKS.CONST.Events.CONNECTION_STATE_CHANGE, function (event, data) {
        if (data.state == WMKS.CONST.ConnectionState.CONNECTED) {
          console.log("connection state change : connected");
        }
      });

      const local = JSON.parse(localStorage.getItem("ticketWs") || "{}");
      const url = `wss://${local.host}/${local.port};${local.ticket}`;
      wmks.connect(url);
      document.getElementById("name").innerHTML = localStorage.getItem("nameConsole");

      $ctrlAltDelButton = $("#ctrl-alt-del");
      $ctrlAltDelButton.bind("click", function () {
        var keyCodes = [17, 18, 46];
        const VSCAN_LCONTROL = 0x01d;
        const VSCAN_LALT = 0x038;
        const VSCAN_RCONTROL = 0x11d;
        const VSCAN_RALT = 0x138;
        const VSCAN_DELETE = 0x153;

        wmks.sendKeyCodes(keyCodes, [VSCAN_LCONTROL, VSCAN_LALT, VSCAN_DELETE], true);
        wmks.sendKeyCodes(keyCodes, [VSCAN_LCONTROL, VSCAN_LALT, VSCAN_DELETE], true);
      });
    </script>
    Â 
  </body>
</html>
